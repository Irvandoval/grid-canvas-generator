<!DOCTYPE html>
<html>

<head>
    <title>Ejemplo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>
    <div class="container">
        <h2 class="text-center">Ejemplo</h2>
        <div class="row">
            <div class="col-md-3">
                <div class="panel panel-primary">
                    <div class="panel-heading">Producto</div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="form-group col-xs-6">
                                <label for="">Largo</label>
                                <input id="cellWidth" class="form-control" type="number" min="1" onchange="enviar()"/>
                            </div>
                            <div class="form-group col-xs-6">
                                <label for="">Ancho</label>
                                <input id="cellHeight" class="form-control" type="number" min="0"  onchange="enviar()"/>
                            </div>
                            <div class="form-group col-xs-6">
                                <label for="">Margen entre Columnas</label>
                                <input id="colMargin" class="form-control" type="number" min="0"  onchange="enviar()"/>
                            </div>
                            <div class="form-group col-xs-6">
                                <label for="">Margen entre Filas</label>
                                <input id="rowMargin" class="form-control" type="number" min="1" onchange="enviar()"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">Canvas</div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="form-group col-xs-6">
                                <label for="">Largo</label>
                                <input id="canvasWidth" class="form-control" type="number" min="1" onchange="enviar()"/>
                            </div>
                            <div class="form-group col-xs-6">
                                <label for="">Ancho</label>
                                <input id="canvasHeight" class="form-control" type="number" min="1" onchange="enviar()"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-danger">
                    <div class="panel-heading">Dibujar</div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="form-group col-xs-4">
                                <label for="">Filas</label>
                                <input id="rows" class="form-control" type="number" min="1" onchange="enviar()"/>
                            </div>
                            <div class="form-group col-xs-4">
                                <label for="">Columnas</label>
                                <input id="columns" class="form-control" type="number" min="1" onchange="enviar()"/>
                            </div>
                            <div class="form-group col-xs-4">
                                <label for="">Cabida</label>
                                <input id="cabida" class="form-control" type="number" readonly/>
                            </div>
                            <div class="form-group col-xs-12">
                                <label for="">Centrar</label> <input id="centered" type="checkbox" onchange="enviar()" />
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9">
                <div class="row">
                    <div class="col-md-12 text-center">

                    </div>
                    <div class="col-md-12">

                        <canvas id="myCanvas" width="800" height="500" style="border:1px solid #d3d3d3;">
                            Your browser does not support the HTML5 canvas tag.</canvas>
                    </div>
                </div>

            </div>

        </div>
    </div>


    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="./grid-canvas.js"></script>
    <script>
        var SELECTORS_STR = '#cellWidth, #cellHeight, #rows, #columns, #colMargin, #canvasWidth,' +
            '#canvasHeight, #centered';

        function enviar() {
            setCabida();
            generarGrid();
        };
        function setCanvasSize() {
            var canvas = document.getElementById("myCanvas");
            canvas.width = parseInt(document.getElementById('canvasWidth').value);
            canvas.height = parseInt(document.getElementById('canvasHeight').value);
        }
        function generarGrid() {
            var opciones = {};
            opciones = {
                cellWidth: parseFloat(document.getElementById('cellWidth').value),
                cellHeight: parseFloat(document.getElementById('cellHeight').value),
                rows: parseInt(document.getElementById('rows').value),
                columns: parseInt(document.getElementById('columns').value),
                colMargin: parseFloat(document.getElementById('colMargin').value),
                rowMargin: parseFloat(document.getElementById('rowMargin').value),
                canvasMargin: 10,
                canvasWidth: parseFloat(document.getElementById('canvasWidth').value),
                canvasHeight: parseFloat(document.getElementById('canvasHeight').value),
                centered: $('#centered:checked').val()
            }

            setCanvasSize();
            generateCanvas('myCanvas', opciones);
        }

        function setCabida() {
            if (parseFloat(document.getElementById('rows').value) && parseInt(document.getElementById('columns').value)) {
                $('#cabida').val(parseInt(document.getElementById('rows').value * parseInt(document.getElementById('columns').value)));
            }
        }
    </script>
</body>

</html>